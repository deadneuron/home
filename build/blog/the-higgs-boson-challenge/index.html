<!DOCTYPE html><html><head><title>Blog | The White Acre</title><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><link rel="icon" href="/static/favicon.ico" /><link rel="stylesheet" href="/static/article.css" /><link rel="stylesheet" href="/static/prism.css" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.css" /><link rel="preconnect" href="https://fonts.googleapis.com" /><link rel="preconnect" href="https://fonts.gstatic.com" /><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@500;700&amp;display=block" /><link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.css" /><script src="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.js"></script></head><body><div class="home"><header><div class="wrapper"><a href="/" class="logo"><img src="/static/logo.svg" /></a><nav><a href="/about">About</a><a href="/models">Models</a><a href="/blog">Notebooks</a><a href="/research">Papers</a></nav></div></header><main><div class="hero" style="background-image: url(/static/higgs-bg.png)"><div class="overlay"></div><div class="wrapper"><h1>The Higgs Boson Challenge</h1><p>An exciting dataset released by a team at CERN. This dataset contains 250,000 particle collision events in the large hadron collider.</p></div></div><div class="article"><div class="wrapper"><div class="content"><p>In 2012, the ATLAS experiment at the Large Hadron Collider in Switzerland, discovered a new particle called the Higgs Boson. This discovery was a breakthrough in particle physics, as the Higgs Boson was long theorized to exist, but almost impossible to detect. It's small, has no spin or electrical charge, and is so unstable that it decays into other particles almost instantly.<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> After the discovery, the media dubbed the Higgs Boson &quot;the god particle&quot; due to its role in generating mass as other particles interact with the Higgs field.</p>
<h2 id="introduction">Introduction</h2>
<p>The Large Hadron Collider is a machine that collides protons together at high speed. When they collide, they produce a small explosion and the LHC measures and tracks the resulting particles.</p>
<p>Through this process, the higgs boson may or may not appear. It decays so fast that the LHC can not observe it directly. By looking at the final state of the particles, we can perform a kind of backtracking and deduce if the particles were the result of a higgs boson decay.</p>
<p>In this dataset, every row corresponds to a collision event. Every event contains one lepton, one hadronic tau, and a variable number of jets. We're given the measured momenta of these particles and using these values and some special features derived by the physicists at the LHC, we are going to try to detect whether an event contained a higgs boson or not.</p>
<h2 id="overview">Overview</h2>
<p>The training and testing datasets come from <a href="https://www.kaggle.com/c/higgs-boson/data" class="uri">https://www.kaggle.com/c/higgs-boson/data</a>. They contain 250,000 and 550,000 instances respectively. Each feature of each event starts with either PRI or DER, standing for primitive or derived. The primitive features are raw measurements obtained directly from the collision and derived features are attributes computed from that primitive data.</p>
<p>The folks at ATLAS have provided a great rundown of particle physics for non physicists here <a href="http://opendata.cern.ch/record/329" class="uri">http://opendata.cern.ch/record/329</a>.</p>
<div class="sourceCode"><pre class="sourceCode julia"><code class="sourceCode julia">using CSV, DataFrames, Gadfly

<span class="co"># Dataset downloaded from https://www.kaggle.com/c/higgs-boson/data</span>
train = CSV.read(<span class="st">&quot;train.csv&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode julia"><code class="sourceCode julia">@show describe(train)</code></pre></div>
<pre class="none"><code>│ Row │ variable                    │ mean        │ min        │ median  │ max     │ nunique │ nmissing │ eltype   │
│     │ Symbol                      │ Union…      │ Any        │ Union…  │ Any     │ Union…  │ Nothing  │ DataType │
├─────┼─────────────────────────────┼─────────────┼────────────┼─────────┼─────────┼─────────┼──────────┼──────────┤
│ 1   │ EventId                     │ 2.25e5      │ 100000     │ 2.25e5  │ 349999  │         │          │ Int64    │
│ 2   │ DER_mass_MMC                │ -49.0231    │ -999.0     │ 105.012 │ 1192.03 │         │          │ Float64  │
│ 3   │ DER_mass_transverse_met_lep │ 49.2398     │ 0.0        │ 46.524  │ 690.075 │         │          │ Float64  │
│ 4   │ DER_mass_vis                │ 81.182      │ 6.329      │ 73.752  │ 1349.35 │         │          │ Float64  │
│ 5   │ DER_pt_h                    │ 57.896      │ 0.0        │ 38.4675 │ 2835.0  │         │          │ Float64  │
│ 6   │ DER_deltaeta_jet_jet        │ -708.421    │ -999.0     │ -999.0  │ 8.503   │         │          │ Float64  │
│ 7   │ DER_mass_jet_jet            │ -601.237    │ -999.0     │ -999.0  │ 4974.98 │         │          │ Float64  │
│ 8   │ DER_prodeta_jet_jet         │ -709.357    │ -999.0     │ -999.0  │ 16.69   │         │          │ Float64  │
│ 9   │ DER_deltar_tau_lep          │ 2.3731      │ 0.208      │ 2.4915  │ 5.684   │         │          │ Float64  │
│ 10  │ DER_pt_tot                  │ 18.9173     │ 0.0        │ 12.3155 │ 2835.0  │         │          │ Float64  │
│ 11  │ DER_sum_pt                  │ 158.432     │ 46.104     │ 120.665 │ 1852.46 │         │          │ Float64  │
│ 12  │ DER_pt_ratio_lep_tau        │ 1.43761     │ 0.047      │ 1.28    │ 19.773  │         │          │ Float64  │
│ 13  │ DER_met_phi_centrality      │ -0.128305   │ -1.414     │ -0.356  │ 1.414   │         │          │ Float64  │
│ 14  │ DER_lep_eta_centrality      │ -708.985    │ -999.0     │ -999.0  │ 1.0     │         │          │ Float64  │
│ 15  │ PRI_tau_pt                  │ 38.7074     │ 20.0       │ 31.804  │ 764.408 │         │          │ Float64  │
│ 16  │ PRI_tau_eta                 │ -0.010973   │ -2.499     │ -0.023  │ 2.497   │         │          │ Float64  │
│ 17  │ PRI_tau_phi                 │ -0.00817107 │ -3.142     │ -0.033  │ 3.142   │         │          │ Float64  │
│ 18  │ PRI_lep_pt                  │ 46.6602     │ 26.0       │ 40.516  │ 560.271 │         │          │ Float64  │
│ 19  │ PRI_lep_eta                 │ -0.0195075  │ -2.505     │ -0.045  │ 2.503   │         │          │ Float64  │
│ 20  │ PRI_lep_phi                 │ 0.043543    │ -3.142     │ 0.086   │ 3.142   │         │          │ Float64  │
│ 21  │ PRI_met                     │ 41.7172     │ 0.109      │ 34.802  │ 2842.62 │         │          │ Float64  │
│ 22  │ PRI_met_phi                 │ -0.0101192  │ -3.142     │ -0.024  │ 3.142   │         │          │ Float64  │
│ 23  │ PRI_met_sumet               │ 209.797     │ 13.678     │ 179.739 │ 2003.98 │         │          │ Float64  │
│ 24  │ PRI_jet_num                 │ 0.979176    │ 0          │ 1.0     │ 3       │         │          │ Int64    │
│ 25  │ PRI_jet_leading_pt          │ -348.33     │ -999.0     │ 38.96   │ 1120.57 │         │          │ Float64  │
│ 26  │ PRI_jet_leading_eta         │ -399.254    │ -999.0     │ -1.872  │ 4.499   │         │          │ Float64  │
│ 27  │ PRI_jet_leading_phi         │ -399.26     │ -999.0     │ -2.093  │ 3.141   │         │          │ Float64  │
│ 28  │ PRI_jet_subleading_pt       │ -692.381    │ -999.0     │ -999.0  │ 721.456 │         │          │ Float64  │
│ 29  │ PRI_jet_subleading_eta      │ -709.122    │ -999.0     │ -999.0  │ 4.5     │         │          │ Float64  │
│ 30  │ PRI_jet_subleading_phi      │ -709.119    │ -999.0     │ -999.0  │ 3.142   │         │          │ Float64  │
│ 31  │ PRI_jet_all_pt              │ 73.0646     │ -0.0       │ 40.5125 │ 1633.43 │         │          │ Float64  │
│ 32  │ Weight                      │ 1.64677     │ 0.00150187 │ 1.15619 │ 7.82254 │         │          │ Float64  │
│ 33  │ Label                       │             │ b          │         │ s       │ 2       │          │ String   │
</code></pre>
<p>The &quot;-999.0&quot; values scattered throughout the dataset represent missing or meaningless fields. To ease data exploration, we're creating a working dataframe with the columns containing missing data removed.</p>
<div class="sourceCode"><pre class="sourceCode julia"><code class="sourceCode julia"><span class="co"># Working dataframe with extraneous columns removed</span>
missingcols = [
  :EventId,
  :DER_mass_MMC,
  :DER_deltaeta_jet_jet,
  :DER_mass_jet_jet,
  :DER_prodeta_jet_jet,
  :DER_lep_eta_centrality,
  :PRI_jet_leading_pt,
  :PRI_jet_leading_eta,
  :PRI_jet_leading_phi,
  :PRI_jet_subleading_pt,
  :PRI_jet_subleading_eta,
  :PRI_jet_subleading_phi
]

working = deletecols(train, missingcols)</code></pre></div>
<h3 id="event-distribution">Event Distribution</h3>
<p>Each event in the training set contains a label that tells us whether the event contained a higgs boson or not. By splitting up our working set into groups based on the label, we can look at the distributions and patterns of the features in those groups.</p>
<div class="sourceCode"><pre class="sourceCode julia"><code class="sourceCode julia">signal, background = groupby(working, :Label)</code></pre></div>
<pre class="none"><code>First Group (85667 rows): Label = &quot;s&quot;. Omitted printing of 27 columns
│ Row   │ EventId │ DER_mass_MMC │ DER_mass_transverse_met_lep │ DER_mass_vis │ DER_pt_h │ DER_deltaeta_jet_jet │
│       │ Int64   │ Float64⍰     │ Float64                     │ Float64      │ Float64  │ Float64⍰             │
├───────┼─────────┼──────────────┼─────────────────────────────┼──────────────┼──────────┼──────────────────────┤
│ 1     │ 100000  │ 138.47       │ 51.655                      │ 97.827       │ 27.98    │ 0.91                 │
│ 2     │ 100006  │ 148.754      │ 28.862                      │ 107.782      │ 106.13   │ 0.733                │
⋮
│ 85665 │ 349991  │ 133.457      │ 77.54                       │ 88.989       │ 69.65    │ missing              │
│ 85666 │ 349993  │ 130.075      │ 3.918                       │ 66.781       │ 77.369   │ 0.936                │
│ 85667 │ 349997  │ 105.457      │ 60.526                      │ 75.839       │ 39.757   │ missing              │
⋮
Last Group (164333 rows): Label = &quot;b&quot;. Omitted printing of 27 columns
│ Row    │ EventId │ DER_mass_MMC │ DER_mass_transverse_met_lep │ DER_mass_vis │ DER_pt_h │ DER_deltaeta_jet_jet │
│        │ Int64   │ Float64⍰     │ Float64                     │ Float64      │ Float64  │ Float64⍰             │
├────────┼─────────┼──────────────┼─────────────────────────────┼──────────────┼──────────┼──────────────────────┤
│ 1      │ 100001  │ 160.937      │ 68.768                      │ 103.235      │ 48.146   │ missing              │
│ 2      │ 100002  │ missing      │ 162.172                     │ 125.953      │ 35.635   │ missing              │
⋮
│ 164331 │ 349996  │ missing      │ 58.179                      │ 68.083       │ 22.439   │ missing              │
│ 164332 │ 349998  │ 94.951       │ 19.362                      │ 68.812       │ 13.504   │ missing              │
│ 164333 │ 349999  │ missing      │ 72.756                      │ 70.831       │ 7.479    │ missing              │
</code></pre>
<p>The ratio of signal to background events in the training set is about 1:2. The distributions of the features are pretty much the same except for the transverse momentum features. My hunch is that these fields will end up being important in a machine learning model.</p>
<object data="/static/the-higgs-boson-challenge/sb-stats.svg" type="image/svg+xml">
  <param name="url" value="/static/the-higgs-boson-challenge/sb-stats.svg">
</object>

<div class="sourceCode"><pre class="sourceCode julia"><code class="sourceCode julia"><span class="co"># Signal and Background boxplot stats</span>
<span class="kw">function</span> boxplot_stats(a)
  q1 = quantile(a, <span class="fl">0.25</span>)
  q2 = quantile(a, <span class="fl">0.5</span>)
  q3 = quantile(a, <span class="fl">0.75</span>)

  lf = q1 - (<span class="fl">1.5</span> * (q3 - q1))
  uf = q3 + (<span class="fl">1.5</span> * (q3 - q1))

  <span class="kw">return</span> (lf, q1, q2, q3, uf)
<span class="kw">end</span>

<span class="co"># Construct combined dataframe by looping over columns</span>
sb_stats = DataFrame(name=[], label=[], lf=[], lh=[], m=[], uh=[], uf=[])

<span class="kw">for</span> i <span class="kw">in</span> <span class="fl">1</span>:<span class="fl">20</span>
  stats = boxplot_stats(signal[:, i])
  push!(sb_stats, [names(signal)[i], <span class="st">&quot;s&quot;</span>, stats...])

  stats = boxplot_stats(background[:, i])
  push!(sb_stats, [names(background)[i], <span class="st">&quot;b&quot;</span>, stats...])
<span class="kw">end</span></code></pre></div>
<h3 id="particle-distribution">Particle Distribution</h3>
<p>The ATLAS detector at the LHC is the largest particle detector in the world. It measures the 3 dimensional final state properties of the collision through a series of concentric cylinders around the collision point.<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> Here's a plot of each hadronic tau and lepton for every event in the training set.</p>
<video controls>
  <source src="/static/the-higgs-boson-challenge/particles-3d.mp4" type="video/mp4">
  Video not supported.
</video>

<div class="sourceCode"><pre class="sourceCode julia"><code class="sourceCode julia">using Makie

tau_coordinates = Point3f0[]
lep_coordinates = Point3f0[]

<span class="kw">function</span> cartesian(pt, ϕ, η)
  x = pt * cos(ϕ)
  y = pt * sin(ϕ)
  z = pt * sinh(η)

  <span class="kw">return</span> (x, y, z)
<span class="kw">end</span>

<span class="kw">for</span> row <span class="kw">in</span> eachrow(train)
  push!(tau_coordinates, cartesian(row[:PRI_tau_pt], row[:PRI_tau_phi], row[:PRI_tau_eta]))
  push!(lep_coordinates, cartesian(row[:PRI_lep_pt], row[:PRI_lep_phi], row[:PRI_lep_eta]))
<span class="kw">end</span>

scene = Scene(resolution=(<span class="fl">1200</span>, <span class="fl">800</span>), backgroundcolor=<span class="st">&quot;#222831&quot;</span>)
scatter!(scene, tau_coordinates, markersize=<span class="fl">5</span>, color=<span class="st">&quot;#fe4365&quot;</span>)
scatter!(scene, lep_coordinates, markersize=<span class="fl">5</span>, color=<span class="st">&quot;#eca25c&quot;</span>)

scale!(scene, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>)
scene.center = false

record(scene, <span class="st">&quot;particles-3d.mp4&quot;</span>, <span class="fl">1</span>:<span class="fl">200</span>) <span class="kw">do</span> i
  rotate_cam!(scene, <span class="fl">0.01</span>, <span class="fl">0.0</span>, <span class="fl">0.0</span>)
<span class="kw">end</span></code></pre></div>
<p>This density plot shows the distribution of those particles in the transverse plane. Anything that escapes down the longitudinal axis is not detectable, and thus we see most particles end up in a small ring around the z-axis.</p>
<object data="/static/the-higgs-boson-challenge/coordinate-density.svg" type="image/svg+xml">
  <param name="url" value="/static/the-higgs-boson-challenge/coordinate-density.svg">
</object>

<div class="sourceCode"><pre class="sourceCode julia"><code class="sourceCode julia">coordinates = DataFrame(x=[], y=[], z=[])

<span class="kw">for</span> row <span class="kw">in</span> eachrow(working)
  push!(coordinates, cartesian(row[:PRI_tau_pt], row[:PRI_tau_phi], row[:PRI_tau_eta]))
  push!(coordinates, cartesian(row[:PRI_lep_pt], row[:PRI_lep_phi], row[:PRI_lep_eta]))
<span class="kw">end</span>

plot(
  coordinates,
  x = :x,
  y = :y,
  Geom.density2d,
  Scale.color_continuous(colormap=x-&gt;get(ColorSchemes.blackbody, x))
)</code></pre></div>
<h3 id="what-role-do-jets-play">What role do jets play?</h3>
<p>A jet is a narrow stream of particles that occur as the result of the hadronization of a quark or gluon.<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a> Every event in our dataset has either 0, 1, 2, or 3+ jets. These jets are important as they give us crucial insight into the energy of the system. In our training set, events with two jets show the highest probability to contain a higgs boson.</p>
<object data="/static/the-higgs-boson-challenge/num-jets.svg" type="image/svg+xml">
  <param name="url" value="/static/the-higgs-boson-challenge/num-jets.svg">
</object>

<div class="sourceCode"><pre class="sourceCode julia"><code class="sourceCode julia">jet_groups = groupby(working, :PRI_jet_num, sort=true)
jet_df = DataFrame(num_jets=[], num_s=[], num_b=[])

<span class="kw">for</span> group <span class="kw">in</span> jet_groups
  num_jets = first(group[:PRI_jet_num])
  num_s = count(group[:Label] .== <span class="st">&quot;s&quot;</span>)
  num_b = count(group[:Label] .== <span class="st">&quot;b&quot;</span>)

  push!(jet_df, (num_jets, num_s, num_b))

  println(<span class="st">&quot;$num_jets: $(num_s / num_b)&quot;</span>)

  <span class="co"># Ratio of signal to background ^</span>
  <span class="co"># 0: 0.3425377245669905</span>
  <span class="co"># 1: 0.5560460729622346</span>
  <span class="co"># 2: 1.0441874619598295</span>
  <span class="co"># 3: 0.4361433292295730</span>
<span class="kw">end</span>

plot(
  stack(jet_df, [:num_s, :num_b]),
  x = :num_jets,
  y = :value,
  color = :variable,
  Geom.bar(position = :dodge)
)</code></pre></div>
<h3 id="missing-mass-and-energy">Missing Mass and Energy</h3>
<p>Energy in the ATLAS detector can escape detection. The two primary ways this happens is through the neutrino, a small fundamental particle that doesn't strongly interact with matter, and through the longitudinal axis, where the machine doesn't have detection capabilities. Using the law of the conservation of momentum, physicists can infer properties of the missing energy and use that to estimate the candidate mass of a Higgs Boson in any given event.</p>
<object data="/static/the-higgs-boson-challenge/transverse-energy.svg" type="image/svg+xml">
  <param name="url" value="/static/the-higgs-boson-challenge/transverse-energy.svg">
</object>

<object data="/static/the-higgs-boson-challenge/higgs-invariant-mass.svg" type="image/svg+xml">
  <param name="url" value="/static/the-higgs-boson-challenge/higgs-invariant-mass.svg">
</object>

<h3 id="correlations">Correlations</h3>
<p>The features that are most correlated to each other are the tau phi, tau eta, lepton phi and lepton eta angles, as well as a couple of derived features that depend on those. Due to the missing values, we removed most of the jet features, which are probably strongly correlated with the related jet derived features.</p>
<object data="/static/the-higgs-boson-challenge/correlations.svg" type="image/svg+xml">
  <param name="url" value="/static/the-higgs-boson-challenge/correlations.svg">
</object>

<div class="sourceCode"><pre class="sourceCode julia"><code class="sourceCode julia">correlations = cor(<span class="dt">Matrix</span>(working[:, <span class="fl">1</span>:<span class="fl">20</span>]))

spy(
  correlations,
  Scale.y_discrete(labels=i-&gt;names(working[:, <span class="fl">1</span>:<span class="fl">20</span>])[i]),
  Guide.ylabel(nothing),
  Guide.colorkey(title=<span class="st">&quot;Correlation</span>\n<span class="st">Coefficient  &quot;</span>),
  Guide.xticks(label=false),
  Guide.xlabel(nothing)
)</code></pre></div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><pre class="example"><code>https://en.wikipedia.org/wiki/Higgs_boson
</code></pre>
<a href="#fnref1">↩</a></li>
<li id="fn2"><pre class="example"><code>https://en.wikipedia.org/wiki/ATLAS_experiment
</code></pre>
<a href="#fnref2">↩</a></li>
<li id="fn3"><pre class="example"><code>https://en.wikipedia.org/wiki/Jet_(particle_physics)
</code></pre>
<a href="#fnref3">↩</a></li>
</ol>
</div>
</div><div class="sidebar"><p>Placeholder</p></div></div></div></main><script src="/static/prism.js"></script><script src="/static/prism-python.min.js"></script><script src="/static/prism-julia.min.js"></script><script src="/static/katex.js"></script><script src="/static/katex-auto-render.js" onload="renderMathInElement(document.body);"></script><footer><div class="wrapper"><div class="column"><h2>Site</h2><a href="/about">About</a><a href="/art">Art</a><a href="/music">Music</a><a href="">Contact</a></div><div class="column"><h2>Links</h2><a href="">Hello</a><a href="">Hello</a></div><div class="column"><h2>Hello World</h2></div></div></footer></div></body></html>